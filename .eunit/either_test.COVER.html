<html>
<head><title>.eunit/either_test.COVER.html</title></head><body bgcolor=white text=black>
<pre>
File generated from /Users/reid/Documents/repos/masters/fn/.eunit/either_test.erl by COVER 2013-06-19 at 14:44:56

****************************************************************************

        |  %% -------------------------------------------------------------------
        |  %% Copyright (c) 2012 Reid Draper. All Rights Reserved.
        |  %%
        |  %% This file is provided to you under the Apache License,
        |  %% Version 2.0 (the "License"); you may not use this file
        |  %% except in compliance with the License.  You may obtain
        |  %% a copy of the License at
        |  %%
        |  %%   http://www.apache.org/licenses/LICENSE-2.0
        |  %%
        |  %% Unless required by applicable law or agreed to in writing,
        |  %% software distributed under the License is distributed on an
        |  %% "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
        |  %% KIND, either express or implied.  See the License for the
        |  %% specific language governing permissions and limitations
        |  %% under the License.
        |  %%
        |  %% -------------------------------------------------------------------
        |  
        |  -module(either_test).
        |  
        |  -compile(export_all).
        |  
        |  -ifdef(TEST).
        |  
        |  -include_lib("eunit/include/eunit.hrl").
        |  
        |  %% Test helpers
        |  %% ---------------------------------------------------------------------------
        |  
        |  increment(A) -&gt;
     7..|      A + 1.
        |  
        |  incrementM(A) -&gt;
     6..|      either:return(increment(A)).
        |  
        |  %% Tests
        |  %% ---------------------------------------------------------------------------
        |  
        |  lift_1_test() -&gt;
     1..|      ?assertEqual({ok, 6},
     1..|                   either:lift({ok, 5}, fun increment/1)).
        |  
        |  lift_2_test() -&gt;
     1..|      Error = {error, "oh noes"},
     1..|      ?assertEqual(Error,
     1..|                   either:lift(Error, fun increment/1)).
        |  
        |  %% pipe test
        |  input_and_answers() -&gt;
     1..|      Error = {error, "error"},
     1..|      IncM = fun incrementM/1,
     1..|      Fail = fun (_A) -&gt; Error end,
     1..|      [{Error, [IncM, IncM, IncM], Error},
        |       {{ok, 5}, [IncM, IncM, IncM], {ok, 8}},
        |       {{ok, 5}, [IncM, IncM, IncM, Fail], Error}].
        |  
        |  pipe_builder({Input, Pipe, ExpectedAnswer}) -&gt;
     3..|      fun () -&gt;
     3..|              ?assertEqual(ExpectedAnswer,
     3..|                   either:pipe(Input, Pipe))
        |      end.
        |  
        |  pipe_test_() -&gt;
     1..|      {setup,
     1..|       fun () -&gt; ok end,
     3..|       [pipe_builder(A) || A &lt;- input_and_answers()]
        |      }.
        |  
        |  -endif.
</pre>
</body>
</html>
